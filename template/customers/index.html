{% load static %}
<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Ashion Template">
    <meta name="keywords" content="Ashion, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ashion | Template</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet">

    <!-- Css Styles -->
    <link rel="stylesheet" href="{% static "shop/css/bootstrap.min.css" %}" type="text/css">
    <link rel="stylesheet" href="{% static "shop/css/font-awesome.min.css" %}" type="text/css">
    <link rel="stylesheet" href="{% static "shop/css/elegant-icons.css" %}" type="text/css">
    <link rel="stylesheet" href="{% static "shop/css/jquery-ui.min.css" %}" type="text/css">
    <link rel="stylesheet" href="{% static "shop/css/magnific-popup.css" %}" type="text/css">
    <link rel="stylesheet" href="{% static "shop/css/owl.carousel.min.css" %}" type="text/css">
    <link rel="stylesheet" href="{% static "shop/css/slicknav.min.css" %}" type="text/css">
    <link rel="stylesheet" href="{% static "shop/css/style.css" %}" type="text/css">

    <style>
        .wishlist-items {
            list-style-type: none;
            padding: 0;
        }

        .wishlist-item {
            display: flex;
            align-items: center;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .wishlist-item-image img {
            width: 100px; /* Adjust as needed */
            height: auto;
            border-radius: 8px;
            margin-right: 20px;
        }

        .wishlist-item-details {
            flex-grow: 1;
        }

        .wishlist-item-details h3 {
            font-size: 20px;
            margin: 0;
            color: #333;
        }

        .wishlist-item-price {
            font-size: 18px;
            color: #e53637;
            margin: 5px 0;
        }
        .profile-details {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .profile-details img {
            height: 40px;
            width: 40px;
            border-radius: 50%;
        }

        .profile-details .admin_name {
            margin-left: 10px;
            font-size: 16px;
            color: #333;
        }

        .profile-details .bx-chevron-down {
            margin-left: 10px;
            cursor: pointer;
        }

        .profile-details .dropdown-menu {
            display: none; /* Keep it hidden by default */
            position: absolute;
            top: 50px;
            right: 0;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
            border-radius: 5px;
            overflow: hidden;
            z-index: 1000; /* Ensure it appears above other elements */
        }

        .profile-details .dropdown-menu li {
            list-style: none;
        }

        .profile-details .dropdown-menu li a {
            display: block;
            padding: 10px 20px;
            text-decoration: none;
            color: #333;
            border-bottom: 1px solid #f0f0f0;
        }

        .profile-details .dropdown-menu li a:hover {
            background-color: #f0f0f0;
        }

        .profile-details:hover .dropdown-menu,
        .profile-details .dropdown-menu:hover {
            display: block; /* Show on hover */
        }

        .search-container {
            position: relative;
            display: inline-flex;
            align-items: center;
            width: 300px;
            margin-right: 20px;
            vertical-align: middle;
        }

        .search-input {
            width: 100%;
            padding: 8px 35px 8px 15px;
            border: 1px solid #e5e5e5;
            border-radius: 20px;
            outline: none;
            font-size: 14px;
            background-color: #f8f9fa;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #ca1515;
            box-shadow: 0 0 5px rgba(202, 21, 21, 0.2);
            background-color: #fff;
        }

        .voice-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
        }
        .voice-btn.recording {
            color: #ff0000;
        }
        .voice-icon {
            font-size: 18px;
        }

        .search-form {
            display: inline-block;
            margin-right: 15px;
        }
        .header__search {
            position: relative;
            display: flex;
            align-items: center;
        }
        .search-input {
            width: 300px;
            padding: 8px 35px 8px 15px;
            border: 1px solid #e5e5e5;
            border-radius: 20px;
        }
        .header__search button {
            position: absolute;
            right: 15px;
            background: none;
            border: none;
            cursor: pointer;
        }
        .header__search button i {
            color: #777;
        }
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 4px;
        }
        .alert-danger {
            color: #721c24;
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }

        /* Enhanced search container styles */
        .search-container {
            position: relative;
            margin-right: 15px;
        }
        
        .header__search {
            position: relative;
            display: flex;
            align-items: center;
            max-width: 400px;
        }
        
        /* Enhanced input styles */
        .search-input {
            width: 100%;
            padding: 12px 90px 12px 20px;
            border: 2px solid #e5e5e5;
            border-radius: 25px;
            outline: none;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: #333;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
        }
        
        /* Enhanced button styles */
        .search-button,
        .voice-search-button {
            position: absolute;
            background: none;
            border: none;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border-radius: 50%;
        }
        
        .search-button {
            right: 45px;
        }
        
        .voice-search-button {
            right: 5px;
        }
        
        .search-button i,
        .voice-search-button i {
            color: #777;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        /* Enhanced recording state */
        .voice-search-button.recording {
            background-color: #ff4444;
            box-shadow: 0 0 10px rgba(255,68,68,0.5);
        }
        
        .voice-search-button.recording i {
            color: white;
            animation: pulse 1.5s infinite;
        }
        
        /* Enhanced hover states */
        .search-button:hover,
        .voice-search-button:hover {
            background-color: #f5f5f5;
        }
        
        .search-button:hover i,
        .voice-search-button:hover i {
            color: #333;
        }
        
        /* Enhanced animation */
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        /* Responsive styles */
        @media (max-width: 768px) {
            .search-input {
                width: 250px;
                padding-right: 80px;
            }
            
            .search-button,
            .voice-search-button {
                width: 35px;
                height: 35px;
            }
            
            .search-button i,
            .voice-search-button i {
                font-size: 14px;
            }
        }

        .search-form {
            width: 100%;
            padding: 10px 0;
        }

        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            padding: 12px 40px 12px 20px;
            border: 2px solid #e5e5e5;
            border-radius: 25px;
            font-size: 14px;
        }

        .voice-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
        }

        .voice-btn.recording {
            color: #ff0000;
        }

        .header__right {
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .header__right__widget {
            margin-left: 15px;
        }

        /* Header layout fixes */
        .header__menu ul {
            margin: 0;
            padding: 0;
            list-style: none;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header__menu ul li {
            margin: 0;
            padding: 0;
        }

        .search-form {
            width: 100%;
            padding: 0;
            margin: 0;
        }

        .search-container {
            position: relative;
            max-width: 500px;
            margin: 0 auto;
        }

        .search-input {
            width: 100%;
            height: 40px;
            padding: 8px 40px 8px 20px;
            border: 2px solid #e5e5e5;
            border-radius: 25px;
            font-size: 14px;
        }

        .voice-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
        }

        .voice-btn.recording {
            color: #ff0000;
        }

        .header__right {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 15px;
        }

        .header__right__widget {
            margin: 0;
            padding: 0;
            list-style: none;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            width: 350px;
            max-height: 500px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            transform: translateY(100%);
            opacity: 0;
            visibility: hidden;
        }
        
        .chatbot-container.active {
            transform: translateY(0);
            opacity: 1;
            visibility: visible;
        }
        
        .chatbot-header {
            background: #ca1515;
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chatbot-header h4 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .chatbot-toggle {
            font-size: 20px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .chat-icon {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 60px;
            height: 60px;
            background: #ca1515;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 999;
            transition: all 0.3s ease;
        }
        
        .chat-icon:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }
        
        .chat-icon i {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .chatbot-messages {
            height: 350px;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        
        .message {
            max-width: 80%;
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 18px;
            line-height: 1.4;
            word-wrap: break-word;
        }
        
        .user-message {
            background: #f0f0f0;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }
        
        .bot-message {
            background: #e8f1f3;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }
        
        .chatbot-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid #e0e0e0;
        }
        
        .chatbot-input input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 25px;
            outline: none;
        }
        
        .chatbot-input button {
            background: #ca1515;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 10px 15px;
            margin-left: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .chatbot-input button:hover {
            background: #a51212;
        }
        
        .typing-indicator {
            display: none;
            align-self: flex-start;
            background: #e8f1f3;
            border-radius: 18px;
            padding: 10px 15px;
            margin-bottom: 10px;
        }
        
        .typing-indicator span {
            height: 8px;
            width: 8px;
            background: #666;
            display: inline-block;
            border-radius: 50%;
            margin-right: 5px;
            animation: typing 1s infinite;
        }
        
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
        
        @keyframes typing {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }
    </style>
</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Offcanvas Menu Begin -->
    <body>
        <!-- Page Preloder -->
        {% comment %} <div id="preloder">
            <div class="loader"></div>
        </div> {% endcomment %}
    
        <!-- Offcanvas Menu Begin -->
        <div class="offcanvas-menu-overlay"></div>
        <div class="offcanvas-menu-wrapper">
            <div class="offcanvas__close">+</div>
            <!-- <ul class="offcanvas__widget">
                <li><span class="icon_search search-switch"></span></li>
                <li><a href="#"><span class="icon_heart_alt"></span>
                    <div class="tip">2</div>
                </a></li>
                <li><a href="#"><span class="icon_bag_alt"></span>
                    <div class="tip">2</div>
                </a></li>
            </ul> -->
            <div class="offcanvas__logo">
                <a href="./index.html"><img src="img/logo.png" alt=""></a>
            </div>
            <div id="mobile-menu-wrap"></div>
            <div class="offcanvas__auth">
                <a href="#">Login</a>
                <a href="#">Register</a>
            </div>
        </div>
        <!-- Offcanvas Menu End -->
    
    <!-- Offcanvas Menu End -->

    <!-- Header Section Begin -->
    <header class="header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-xl-3 col-lg-3">
                    <nav class="header__menu">
                        <ul class="d-flex align-items-center">
                            <li class="active"><a href="{% url 'shop_index' %}">Home</a></li>
                            {% if user.is_authenticated and request.user.customers %}
                            <li><a href="#new-product-section">Shop</a></li>
                            <li><a href="{% url 'view_your_orders' %}">View Orders</a></li>
                            <!-- <li><a href="#">Product Details</a>
                                <ul class="dropdown">
                                    <li><a href="./product-details.html"></a>Orders</li>
                                    <li><a href="./shop-cart.html">Shop Cart</a></li>
                                    <li><a href="./checkout.html">Checkout</a></li>
                                    <li><a href="./blog-details.html">Address Details</a></li>
                                </ul>
                            </li> -->
                            
                            <!-- <li><a href="./contact.html">Contact</a></li> -->
                          <li> <a href="{% url 'customerlogout' %}">Logout</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-xl-6 col-lg-6 text-center">
                    <form id="searchForm" class="search-form" action="{% url 'search_products' %}" method="GET">
                        <div class="search-container">
                            <input type="text" name="q" class="search-input" placeholder="Search products...">
                            <button type="button" class="voice-btn">
                                <i class="fa fa-microphone voice-icon"></i>
                            </button>
                        </div>
                    </form>
                </div>
                <div class="col-xl-3 col-lg-3">
                    <div class="header__right">
                        {% else %}
                        <li><a href="{% url 'customerlogin' %}">Login</a></li> 
                        <li><a href="{% url 'customer_register' %}">Register</a></li> 
                        {% endif %}
                        <!-- <div class="header__right__auth">
                            <a href="#">Login</a>
                            <a href="#">Register</a>
                        </div> -->
                        <ul class="header__right__widget">
                            <!-- <li><span class="icon_search search-switch"></span></li>
                            <li><a href="#"><span class="icon_heart_alt"></span>
                                <div class="tip">2</div>
                            </a></li> -->
                            {% if user.is_authenticated and request.user.customers %}
                            <li><a href="{% url 'wishlist' %}"><span class="icon_heart_alt"></span>
                                <div class="tip">{{ wishlist_count }}</div>
                            </a></li>
                            <li><a href="{% url 'cart' %}"><span class="icon_bag_alt"></span>
                                <div class="tip">{{ cart_count }}</div>
                            </a></li>
                            <!-- <li><a href="#">Hi {{ user.username }}</a>
                                <ul class="dropdown">
                                    <li><a href="{% url 'customerprofile' %}"></a>Profile</li>
                                    <li><a href="{% url 'add_address' %}">Add Address</a></li>
                                    
                                </ul>
                            </li>  -->

                            <!-- <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <img src="{{ profile_pic }}" alt="Profile" class="profile-icon">
                                    <span class="username">Hi {{ user.username }}</span>
                                </a>
                                <div class="dropdown-menu" aria-labelledby="userDropdown">
                                    <a class="dropdown-item" href="{% url 'customerprofile' %}">Profile</a>
                                    <a class="dropdown-item" href="{% url 'add_address' %}">Add Address</a>
                                </div>
                 </li> -->
                 <div class="profile-details" style="display: inline-block; vertical-align: middle; margin-left: 10px;">
                    <span class="admin_name" style="font-size: 16px; font-weight: 700; color: #010302;">Hi {{user.username}}</span>
                    <i class='bx bx-chevron-down'></i>
                    <ul class="dropdown-menu" style="display: none; position: absolute; background-color: #fff; border-radius: 5px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);">
                        <li><a class="dropdown-item" href="{% url 'customerprofile' %}" style="padding: 10px 20px; text-decoration: none; color: #333;">Profile</a></li>
                        <li><a class="dropdown-item" href="{% url 'order_history' %}" style="padding: 10px 20px; text-decoration: none; color: #333;">View Orders</a></li>
                        <!-- <li><a class="dropdown-item" href="{% url 'track_order_status' %}" style="padding: 10px 20px; text-decoration: none; color: #333;">Track Orders</a></li> -->
                        <li><a class="dropdown-item" href="{% url 'add_address' %}" style="padding: 10px 20px; text-decoration: none; color: #333;">Add Address</a></li>
                        <li><a class="dropdown-item" href="{% url 'customerlogout' %}" style="padding: 10px 20px; text-decoration: none; color: #333;">Logout</a></li>
                    </ul>
                  </div>



                            <!-- <div class="profile-details" style="display: inline-block; vertical-align: middle; margin-left: 10px;">
                                <a href="{% url 'customerprofile' %}">
                                    <span class="admin_name" style="font-size: 16px; font-weight: 700; color: black;">Hi {{ user.username }}</span>
                                </a>
                                
                            </div> -->
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
            <div class="canvas__open">
                <i class="fa fa-bars"></i>
            </div>
        </div>
    </header>
    <!-- Header Section End -->

    <!-- Categories Section Begin -->
    <section class="categories">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-6 p-0">
                    <div class="categories__item categories__large__item set-bg"
                    data-setbg="{% static 'shop/img/categories/artdecor.jpg' %}">
                    <div class="categories__text">
                        <h1 style="color: white;">Art and Decor</h1>
                        <p style="color: white;">Sitamet, consectetur adipiscing elit, sed do eiusmod tempor incidid-unt labore
                        edolore magna aliquapendisse ultrices gravida.</p>
                        <a href="#" style="color: white;">Shop now</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 p-0">
                        <div class="categories__item set-bg" data-setbg="{% static 'shop/img/categories/fur.jpg' %}">
                            <div class="categories__text">
                                <h4 style="color: white;">Furniture</h4>
                                <p style="color: white;">358 items</p>
                                <a href="#" style="color: white;">Shop now</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 p-0">
                        <div class="categories__item set-bg" data-setbg="{% static 'shop/img/categories/fas.jpg' %}">
                            <div class="categories__text">
                                <h4 style="color: white;">Fashion Accessories</h4>
                                <p style="color: white;">273 items</p>
                                <a href="#" style="color: white;">Shop now</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 p-0">
                        <div class="categories__item set-bg" data-setbg="{% static 'shop/img/categories/gift.jpg' %}">
                            <div class="categories__text">
                                <h4 style="color: white;">Gifts</h4>
                                <p style="color: white;">159 items</p>
                                <a href="#" style="color: white;">Shop now</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 p-0">
                        <div class="categories__item set-bg" data-setbg="{% static 'shop/img/categories/cloth.jpg' %}">
                            <div class="categories__text">
                                <h4 style="color: white;">Cloths</h4>
                                <p style="color: white;">792 items</p>
                                <a href="#" style="color: white;">Shop now</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Categories Section End -->

<!-- Product Section Begin -->
<section class="product spad" id="new-product-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-title">
                    {% if query %}
                        <h4>Search Results for "{{ query }}"</h4>
                    {% else %}
                        <h4>All Products</h4>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <div class="row">
            {% if products %}
                {% for product in products %}
                    <div class="col-lg-3 col-md-4 col-sm-6">
                        <div class="product__item">
                            {% if product.image %}
                                <div class="product__item__pic set-bg" data-setbg="{{ product.image.url }}">
                                    <ul class="product__hover">
                                        <li><a href="{{ product.image.url }}" class="image-popup"><span class="arrow_expand"></span></a></li>
                                        <li><a href="{% url 'add_to_wishlist' product.id %}"><span class="icon_heart_alt"></span></a></li>
                                        <li><a href="{% url 'add_cart' product.id %}"><span class="icon_bag_alt"></span></a></li>
                                    </ul>
                                </div>
                            {% endif %}
                            <div class="product__item__text">
                                <h6>
                                    {% if product.categories.first %}
                                        <a href="{% url 'product_detail' category_slug=product.categories.first.slug product_slug=product.slug %}">{{ product.name }}</a>
                                    {% else %}
                                        <span>{{ product.name }}</span>
                                    {% endif %}
                                </h6>
                                <div class="product__price">₹{{ product.price }}</div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                {% if query %}
                    <div class="col-12 text-center">
                        <p>No products found matching "{{ query }}"</p>
                    </div>
                {% else %}
                    <div class="col-12 text-center">
                        <p>No products available</p>
                    </div>
                {% endif %}
            {% endif %}
        </div>
    </div>
</section>
<!-- Product Section End -->

<!-- Banner Section Begin -->
<section class="banner set-bg" data-setbg="{% static 'shop/img/banner/banner-1.jpg' %}">
    <div class="container">
        <div class="row">
            <div class="col-xl-7 col-lg-8 m-auto">
                <div class="banner__slider owl-carousel">
                    <div class="banner__item">
                        <div class="banner__text">
                            <span>The Chloe Collection</span>
                            <h1>The Project Jacket</h1>
                            <a href="#">Shop now</a>
                        </div>
                    </div>
                    <div class="banner__item">
                        <div class="banner__text">
                            <span>The Chloe Collection</span>
                            <h1>The Project Jacket</h1>
                            <a href="#">Shop now</a>
                        </div>
                    </div>
                    <div class="banner__item">
                        <div class="banner__text">
                            <span>The Chloe Collection</span>
                            <h1>The Project Jacket</h1>
                            <a href="#">Shop now</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Banner Section End -->

<!-- Trend Section Begin -->
<section class="trend spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="trend__content">
                    <div class="section-title">
                        <h4>Hot Trend</h4>
                    </div>
                    <div class="trend__item">
                        <div class="trend__item__pic">
                            <img src="{% static 'shop/img/trend/ht-1.jpg' %}" alt="">
                        </div>
                        <div class="trend__item__text">
                            <h6>Chain bucket bag</h6>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </div>
                            <div class="product__price">$ 59.0</div>
                        </div>
                    </div>
                    <div class="trend__item">
                        <div class="trend__item__pic">
                            <img src="{% static 'shop/img/trend/ht-2.jpg' %}" alt="">
                        </div>
                        <div class="trend__item__text">
                            <h6>Pendant earrings</h6>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </div>
                            <div class="product__price">$ 59.0</div>
                        </div>
                    </div>
                    <div class="trend__item">
                        <div class="trend__item__pic">
                            <img src="{% static 'shop/img/trend/ht-3.jpg' %}" alt="">
                        </div>
                        <div class="trend__item__text">
                            <h6>Cotton T-Shirt</h6>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </div>
                            <div class="product__price">$ 59.0</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="trend__content">
                    <div class="section-title">
                        <h4>Best seller</h4>
                    </div>
                    <div class="trend__item">
                        <div class="trend__item__pic">
                            <img src="{% static 'shop/img/trend/bs-1.jpg' %}" alt="">
                        </div>
                        <div class="trend__item__text">
                            <h6>Cotton T-Shirt</h6>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </div>
                            <div class="product__price">$ 59.0</div>
                        </div>
                    </div>
                    <div class="trend__item">
                        <div class="trend__item__pic">
                            <img src="{% static 'shop/img/trend/bs-2.jpg' %}" alt="">
                        </div>
                        <div class="trend__item__text">
                            <h6>Zip-pockets pebbled tote <br />briefcase</h6>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </div>
                            <div class="product__price">$ 59.0</div>
                        </div>
                    </div>
                    <div class="trend__item">
                        <div class="trend__item__pic">
                            <img src="{% static 'shop/img/trend/bs-3.jpg' %}" alt="">
                        </div>
                        <div class="trend__item__text">
                            <h6>Round leather bag</h6>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </div>
                            <div class="product__price">$ 59.0</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-6">
                <div class="trend__content">
                    <div class="section-title">
                        <h4>Feature</h4>
                    </div>
                    <div class="trend__item">
                        <div class="trend__item__pic">
                            <img src="{% static 'shop/img/trend/f-1.jpg' %}" alt="">
                        </div>
                        <div class="trend__item__text">
                            <h6>Bow wrap skirt</h6>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </div>
                            <div class="product__price">$ 59.0</div>
                        </div>
                    </div>
                    <div class="trend__item">
                        <div class="trend__item__pic">
                            <img src="{% static 'shop/img/trend/f-2.jpg' %}" alt="">
                        </div>
                        <div class="trend__item__text">
                            <h6>Metallic earrings</h6>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </div>
                            <div class="product__price">$ 59.0</div>
                        </div>
                    </div>
                    <div class="trend__item">
                        <div class="trend__item__pic">
                                <img src="{% static 'shop/img/trend/f-3.jpg' %}" alt="">
                        </div>
                        <div class="trend__item__text">
                            <h6>Flap cross-body bag</h6>
                            <div class="rating">
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                                <i class="fa fa-star"></i>
                            </div>
                            <div class="product__price">$ 59.0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Trend Section End -->

<!-- Discount Section Begin -->
<section class="discount">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 p-0">
                <div class="discount__pic">
                    <img src="{% static 'shop/img/discount.jpg' %}" alt="">
                </div>
            </div>
            <div class="col-lg-6 p-0">
                <div class="discount__text">
                    <div class="discount__text__title">
                        <span>Discount</span>
                        <h2>Summer 2019</h2>
                        <h5><span>Sale</span> 50%</h5>
                    </div>
                    <div class="discount__countdown" id="countdown-time">
                        <div class="countdown__item">
                            <span>22</span>
                            <p>Days</p>
                        </div>
                        <div class="countdown__item">
                            <span>18</span>
                            <p>Hour</p>
                        </div>
                        <div class="countdown__item">
                            <span>46</span>
                            <p>Min</p>
                        </div>
                        <div class="countdown__item">
                            <span>05</span>
                            <p>Sec</p>
                        </div>
                    </div>
                    <a href="#">Shop now</a>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Discount Section End -->

<!-- Services Section Begin -->
<section class="services spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="services__item">
                    <i class="fa fa-car"></i>
                    <h6>Free Shipping</h6>
                    <p>For all oder over $99</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="services__item">
                    <i class="fa fa-money"></i>
                    <h6>Money Back Guarantee</h6>
                    <p>If good have Problems</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="services__item">
                    <i class="fa fa-support"></i>
                    <h6>Online Support 24/7</h6>
                    <p>Dedicated support</p>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6">
                <div class="services__item">
                    <i class="fa fa-headphones"></i>
                    <h6>Payment Secure</h6>
                    <p>100% secure payment</p>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Services Section End -->

<!-- Instagram Begin -->
<div class="instagram">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-2 col-md-4 col-sm-4 p-0">
                <div class="instagram__item set-bg" data-setbg="{% static 'shop/img/instagram/insta-1.jpg' %}   ">
                    <div class="instagram__text">
                        <i class="fa fa-instagram"></i>
                        <a href="#">@ ashion_shop</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-4 p-0">
                <div class="instagram__item set-bg" data-setbg="{% static 'shop/img/instagram/insta-2.jpg' %}">
                    <div class="instagram__text">
                        <i class="fa fa-instagram"></i>
                        <a href="#">@ ashion_shop</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-4 p-0">
                <div class="instagram__item set-bg" data-setbg="{% static 'shop/img/instagram/insta-3.jpg' %}">
                    <div class="instagram__text">
                        <i class="fa fa-instagram"></i>
                        <a href="#">@ ashion_shop</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-4 p-0">
                <div class="instagram__item set-bg" data-setbg="{% static 'shop/img/instagram/insta-4.jpg' %}">
                    <div class="instagram__text">
                        <i class="fa fa-instagram"></i>
                        <a href="#">@ ashion_shop</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-4 p-0">
                <div class="instagram__item set-bg" data-setbg="{% static 'shop/img/instagram/insta-5.jpg' %}">
                    <div class="instagram__text">
                        <i class="fa fa-instagram"></i>
                        <a href="#">@ ashion_shop</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-4 col-sm-4 p-0">
                <div class="instagram__item set-bg" data-setbg="{% static 'shop/img/instagram/insta-6.jpg' %}">
                    <div class="instagram__text">
                        <i class="fa fa-instagram"></i>
                        <a href="#">@ ashion_shop</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Instagram End -->

<!-- Footer Section Begin -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-6 col-sm-7">
                <div class="footer__about">
                    <div class="footer__logo">
                            <a href="./index.html"><img src="{% static 'shop/img/logo.png' %}" alt=""></a>
                    </div>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
                    cilisis.</p>
                    <div class="footer__payment">
                        <a href="#"><img src="{% static 'shop/img/payment/payment-1.png' %}" alt=""></a>
                        <a href="#"><img src="{% static 'shop/img/payment/payment-2.png' %}" alt=""></a>
                        <a href="#"><img src="{% static 'shop/img/payment/payment-3.png' %}" alt=""></a>
                        <a href="#"><img src="{% static 'shop/img/payment/payment-4.png' %}" alt=""></a>
                        <a href="#"><img src="{% static 'shop/img/payment/payment-5.png' %}" alt=""></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-5">
                <div class="footer__widget">
                    <h6>Quick links</h6>
                    <ul>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Blogs</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 col-md-3 col-sm-4">
                <div class="footer__widget">
                    <h6>Account</h6>
                    <ul>
                        <li><a href="#">My Account</a></li>
                        <li><a href="#">Orders Tracking</a></li>
                        <li><a href="#">Checkout</a></li>
                        <li><a href="#">Wishlist</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-4 col-md-8 col-sm-8">
                <div class="footer__newslatter">
                    <h6>NEWSLETTER</h6>
                    <form action="#">
                        <input type="text" placeholder="Email">
                        <button type="submit" class="site-btn">Subscribe</button>
                    </form>
                    <div class="footer__social">
                        <a href="#"><i class="fa fa-facebook"></i></a>
                        <a href="#"><i class="fa fa-twitter"></i></a>
                        <a href="#"><i class="fa fa-youtube-play"></i></a>
                        <a href="#"><i class="fa fa-instagram"></i></a>
                        <a href="#"><i class="fa fa-pinterest"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                <div class="footer__copyright__text">
                    <p>Copyright &copy; <script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a></p>
                </div>
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </div>
        </div>
    </div>
</footer>
<!-- Footer Section End -->

<!-- Search Begin -->
<div class="search-model">
    <div class="h-100 d-flex align-items-center justify-content-center">
        <div class="search-close-switch">+</div>
        <form class="search-model-form">
            <input type="text" id="search-input" placeholder="Search here.....">
        </form>
    </div>
</div>
<!-- Search End -->

<!-- Js Plugins -->
<script src="{% static 'shop/js/jquery-3.3.1.min.js' %}"></script>
<script src="{% static 'shop/js/bootstrap.min.js' %}"></script>
<script src="{% static 'shop/js/jquery.magnific-popup.min.js' %}"></script>
<script src="{% static 'shop/js/jquery-ui.min.js' %}"></script>
<script src="{% static 'shop/js/mixitup.min.js' %}"></script>
<script src="{% static 'shop/js/jquery.countdown.min.js' %}"></script>
<script src="{% static 'shop/js/jquery.slicknav.js' %}"></script>
<script src="{% static 'shop/js/owl.carousel.min.js' %}"></script>
<script src="{% static 'shop/js/jquery.nicescroll.min.js' %}"></script>
<script src="{% static 'shop/js/main.js' %}"></script>

<!-- Your existing scripts -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const shopLink = document.querySelector('a[href="#new-product-section"]');
        if (shopLink) {
            shopLink.addEventListener('click', function(e) {
                e.preventDefault();
                const newProductSection = document.getElementById('new-product-section');
                if (newProductSection) {
                    newProductSection.scrollIntoView({behavior: 'smooth'});
                }
            });
        }
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const profileDetails = document.querySelector('.profile-details');
        const dropdownMenu = profileDetails.querySelector('.dropdown-menu');

        // Toggle dropdown visibility on click
        profileDetails.addEventListener('click', function(e) {
            e.stopPropagation(); // Prevent event bubbling
            dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block'; // Toggle dropdown visibility
        });

        // Close the dropdown if clicking outside of it
        document.addEventListener('click', function() {
            dropdownMenu.style.display = 'none';
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.querySelector('.search-input');
        const voiceBtn = document.querySelector('.voice-btn');

        // Initialize speech recognition
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (!SpeechRecognition) {
            console.error('Speech recognition not supported');
            if (voiceBtn) {
                voiceBtn.style.display = 'none';
            }
            return;
        }

        const recognition = new SpeechRecognition();

        if (!voiceBtn || !searchInput || !searchForm) {
            console.error('Required elements not found');
            return;
        }

        // Configure recognition
        recognition.continuous = false;
        recognition.lang = 'en-US';
        recognition.interimResults = true;
        recognition.maxAlternatives = 1;

        // Recognition event handlers
        recognition.onstart = function() {
            voiceBtn.classList.add('recording');
            searchInput.placeholder = 'Listening...';
            console.log('Speech recognition started');
        };

        recognition.onend = function() {
            voiceBtn.classList.remove('recording');
            searchInput.placeholder = 'Search products...';
            console.log('Speech recognition ended');
        };

        recognition.onresult = function(event) {
            let transcript = '';
            
            // Get the latest result
            for (let i = event.resultIndex; i < event.results.length; i++) {
                if (event.results[i].isFinal) {
                    transcript = event.results[i][0].transcript;
                } else {
                    // Show interim results to provide feedback
                    searchInput.value = event.results[i][0].transcript;
                }
            }
            
            if (transcript) {
                // Remove trailing punctuation (period, comma, question mark, exclamation mark)
                transcript = transcript.replace(/[.,?!]+$/, '');
                searchInput.value = transcript;
                console.log('Recognized text (cleaned):', transcript);
                
                // Auto-submit the form after a short delay
                if (transcript.trim()) {
                    // Speak the search confirmation
                    speakText(`Search Results for ${transcript} found.`);
                    
                    setTimeout(() => {
                        searchForm.submit();
                    }, 1000); // Increased delay to allow speech to complete
                }
            }
        };

        recognition.onerror = function(event) {
            console.error('Speech recognition error:', event.error);
            voiceBtn.classList.remove('recording');
            searchInput.placeholder = 'Search products...';
            
            let errorMessage = 'An error occurred with voice search. ';
            switch (event.error) {
                case 'not-allowed':
                    errorMessage += 'Please allow microphone access to use voice search.';
                    break;
                case 'network':
                    errorMessage += 'Please check your internet connection.';
                    break;
                case 'no-speech':
                    errorMessage += 'No speech was detected. Please try again and speak clearly into your microphone.';
                    break;
                default:
                    errorMessage += 'Please try again later.';
            }
            
            // Show error as a tooltip instead of an alert
            searchInput.value = '';
            searchInput.placeholder = 'Voice search error - try again';
            console.error(errorMessage);
        };

        // Voice button click handler
        voiceBtn.addEventListener('click', function() {
            if (voiceBtn.classList.contains('recording')) {
                recognition.stop();
            } else {
                // Clear previous input
                searchInput.value = '';
                // Start with a slight delay to ensure the browser is ready
                setTimeout(() => {
                    try {
                        recognition.start();
                    } catch (e) {
                        console.error('Error starting recognition:', e);
                        // If already started, stop and restart
                        recognition.stop();
                        setTimeout(() => recognition.start(), 200);
                    }
                }, 100);
            }
        });

        // Form submission handler
        searchForm.addEventListener('submit', function(event) {
            const searchQuery = searchInput.value.trim();
            if (!searchQuery) {
                event.preventDefault();
                return;
            }
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.querySelector('.search-input');

        if (searchForm) {
            searchForm.addEventListener('submit', function(event) {
                const searchQuery = searchInput.value.trim();
                if (!searchQuery) {
                    event.preventDefault();
                    return;
                }
            });
        }
    });
</script>

<!-- Function to speak text using the Web Speech API -->
<script>
    function speakText(text) {
        // Check if speech synthesis is supported
        if ('speechSynthesis' in window) {
            // Create a new speech synthesis utterance
            const utterance = new SpeechSynthesisUtterance(text);
            
            // Set properties (optional)
            utterance.volume = 1; // 0 to 1
            utterance.rate = 1; // 0.1 to 10
            utterance.pitch = 1; // 0 to 2
            utterance.lang = 'en-US';
            
            // Speak the utterance
            window.speechSynthesis.speak(utterance);
            
            console.log('Speaking:', text);
        } else {
            console.error('Speech synthesis not supported');
        }
    }
</script>

<!-- Chatbot Component -->
<div class="chatbot-container">
    <div class="chatbot-header">
        <h4>ReArt Assistant</h4>
        <span class="chatbot-toggle">×</span>
    </div>
    <div class="chatbot-messages">
        <div class="message bot-message">
            Hello! I'm the ReArt Assistant. How can I help you with your art shopping today?
        </div>
    </div>
    <div class="typing-indicator">
        <span></span>
        <span></span>
        <span></span>
    </div>
    <div class="chatbot-input">
        <input type="text" placeholder="Type your message here..." id="chatbot-input-field">
        <button id="chatbot-send-btn">Send</button>
    </div>
</div>

<div class="chat-icon">
    <i class="fa fa-comment" aria-hidden="true"></i>
</div>

<!-- Chatbot Gemini API Script -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Chatbot elements
        const chatbotContainer = document.querySelector('.chatbot-container');
        const chatIcon = document.querySelector('.chat-icon');
        const chatbotToggle = document.querySelector('.chatbot-toggle');
        
        // Open chatbot when chat icon is clicked
        chatIcon.addEventListener('click', function() {
            chatbotContainer.classList.add('active');
            chatIcon.style.display = 'none';
        });
        
        // Close chatbot when toggle is clicked
        chatbotToggle.addEventListener('click', function() {
            chatbotContainer.classList.remove('active');
            chatIcon.style.display = 'flex';
        });
        
        // Chatbot message handling
        const messagesContainer = document.querySelector('.chatbot-messages');
        const inputField = document.getElementById('chatbot-input-field');
        const sendButton = document.getElementById('chatbot-send-btn');
        const typingIndicator = document.querySelector('.typing-indicator');
        
        // Get CSRF token from cookies
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        const csrftoken = getCookie('csrftoken');
        
        // Function to add a message to the chat
        function addMessage(message, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
            messageElement.textContent = message;
            
            messagesContainer.appendChild(messageElement);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // Function to show typing indicator
        function showTypingIndicator() {
            typingIndicator.style.display = 'block';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // Function to hide typing indicator
        function hideTypingIndicator() {
            typingIndicator.style.display = 'none';
        }
        
        // Function to send message to Gemini API
        async function sendToGemini(message) {
            try {
                console.log('Sending message to Gemini API:', message);
                const response = await fetch('/shop/api/reart_gemini_chat_endpoint/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': csrftoken,
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({ message: message })
                });
                
                console.log('Response status:', response.status);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('Error response:', errorText);
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                // Get response as JSON directly
                const data = await response.json();
                console.log('Parsed data:', data);
                
                // Check if we have a response property
                if (data.response) {
                    return data.response;
                } else {
                    // Fallback to other properties
                    return data.reply || data.message || "I received your message but couldn't generate a proper response.";
                }
            } catch (error) {
                console.error('Error calling Gemini API:', error);
                return "I'm sorry, I'm having trouble connecting right now. Please try again later. (Error: " + error.message + ")";
            }
        }
        
        // Handle send button click
        sendButton.addEventListener('click', async function() {
            const userMessage = inputField.value.trim();
            if (userMessage === '') return;
            
            // Clear input field
            inputField.value = '';
            
            // Add user message to chat
            addMessage(userMessage, 'user');
            
            // Show the chatbot if it's minimized
            if (!chatbotContainer.classList.contains('active')) {
                chatbotContainer.classList.add('active');
            }
            
            // Show typing indicator
            showTypingIndicator();
            
            try {
                // Get response from Gemini API
                const botResponse = await sendToGemini(userMessage);
                
                // Hide typing indicator and add bot response
                hideTypingIndicator();
                addMessage(botResponse, 'bot');
            } catch (error) {
                // Handle errors gracefully
                hideTypingIndicator();
                addMessage("Sorry, I encountered an error. Please try again later.", 'bot');
                console.error('Chat error:', error);
            }
        });

        // Handle Enter key press
        inputField.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendButton.click();
            }
        });
    });
</script>

</body>

</html>